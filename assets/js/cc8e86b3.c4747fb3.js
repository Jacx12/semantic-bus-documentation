"use strict";(self.webpackChunksemantic_bus_documentation=self.webpackChunksemantic_bus_documentation||[]).push([[8152],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>f});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),m=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=m(e.components);return a.createElement(l.Provider,{value:n},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=m(t),d=r,f=c["".concat(l,".").concat(d)]||c[d]||p[d]||o;return t?a.createElement(f,i(i({ref:n},u),{},{components:t})):a.createElement(f,i({ref:n},u))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[c]="string"==typeof e?e:r,i[1]=s;for(var m=2;m<o;m++)i[m]=t[m];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},9141:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>m});var a=t(7462),r=(t(7294),t(3905));const o={},i=void 0,s={unversionedId:"bus-wiki/Composant:-Transform",id:"bus-wiki/Composant:-Transform",title:"Composant:-Transform",description:"Transforme un objet par mapping gr\xe2ce \xe0 un objet transformation.",source:"@site/docs/bus-wiki/Composant:-Transform.md",sourceDirName:"bus-wiki",slug:"/bus-wiki/Composant:-Transform",permalink:"/semantic-bus-documentation/docs/bus-wiki/Composant:-Transform",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Composant:-Timer",permalink:"/semantic-bus-documentation/docs/bus-wiki/Composant:-Timer"},next:{title:"Composant:-Unicity",permalink:"/semantic-bus-documentation/docs/bus-wiki/Composant:-Unicity"}},l={},m=[{value:"Exemples",id:"exemples",level:3},{value:"Changer le nom des champs",id:"changer-le-nom-des-champs",level:4},{value:"R\xe9organiser la donn\xe9e",id:"r\xe9organiser-la-donn\xe9e",level:4},{value:"Modification de la donn\xe9e",id:"modification-de-la-donn\xe9e",level:4},{value:"Fonctionnement technique",id:"fonctionnement-technique",level:3},{value:"Mise en garde \u26a0\ufe0f",id:"mise-en-garde-\ufe0f",level:3},{value:"Param\xe8tres",id:"param\xe8tres",level:3}],u={toc:m},c="wrapper";function p(e){let{components:n,...t}=e;return(0,r.kt)(c,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Transforme un objet par mapping gr\xe2ce \xe0 un objet transformation."),(0,r.kt)("h3",{id:"exemples"},"Exemples"),(0,r.kt)("h4",{id:"changer-le-nom-des-champs"},"Changer le nom des champs"),(0,r.kt)("p",null,"Prenons cette donn\xe9e en exemple :\n",(0,r.kt)("inlineCode",{parentName:"p"},'{ id : "2", fields { city : "Dar es salaam", contact : "biobuutz@gmail.com" } }')),(0,r.kt)("p",null,'Si l\'on souhaite que les champs city et contact soient renomm\xe9s en "addressLocality" et en "email", il suffit d\'appuyer \xe0 droite dans le carr\xe9 bleu, sur "append" deux fois et de rentrer ceci : '),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"id : $.id\nemail : $.fields.Contact\naddressLocality : $.fields.City\n")),(0,r.kt)("p",null,"Vous noterez que pour acc\xe9der \xe0 un champs il suffit de faire ",(0,r.kt)("inlineCode",{parentName:"p"},"$.champs"),'.\nEt pour acc\xe9der \xe0 un objet au sein de notre donn\xe9e, il suffit de mettre son nom apr\xe8s un signe "$" et de mettre le nom du champs recherch\xe9 par la suite : ',(0,r.kt)("inlineCode",{parentName:"p"},"$.objet.champs"),"."),(0,r.kt)("p",null,"Ce qui donnera comme r\xe9sultat :\n",(0,r.kt)("inlineCode",{parentName:"p"},'{ id : "2", email : "biobuutz@gmail.com", addressLocality : "Dar es Salaam" }')),(0,r.kt)("h4",{id:"r\xe9organiser-la-donn\xe9e"},"R\xe9organiser la donn\xe9e"),(0,r.kt)("p",null,"Si l'on souhaite mettre le champs adressLocality dans un objet address, il suffit d'appuyer \xe0 droite du Bouton Append et de selectionner un objet.\nOn pourra par la suite y ajouter des champs comme on l'a fait pr\xe9c\xe9demment."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"id : $.id\nemail : $.fields.Contact\naddress {\n addressLocality : $.fields.City\n}\n")),(0,r.kt)("p",null,"donnera donc :\n",(0,r.kt)("inlineCode",{parentName:"p"},'{ id : "2", email : "biobuutz@gmail.com", address { addressLocality : "Dar es Salaam" } }')),(0,r.kt)("h4",{id:"modification-de-la-donn\xe9e"},"Modification de la donn\xe9e"),(0,r.kt)("p",null,"On peut \xe9galement r\xe9aliser des traitements sur la donn\xe9e, comme lui demander si elle contient bien un signe '@' pour une adresse mail, mettre toutes les valeurs d'un champs en minuscule etc..\nOn commencera alors le traitement par ",(0,r.kt)("inlineCode",{parentName:"p"},"=")," et on mettra le champs entre ",(0,r.kt)("inlineCode",{parentName:"p"},"{}"),"."),(0,r.kt)("p",null,"Reprenons cette donn\xe9e :\n",(0,r.kt)("inlineCode",{parentName:"p"},'{ id : "2", fields { city : "Dar es Salaam", contact : "biobuutz@gmail.com" } }')),(0,r.kt)("p",null,'Si l\'on souhaite que le champs "Dar es Salaam" apparaisse en minuscule, on peut faire : '),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"id : $.id\nemail : $.fields.Contact\naddressLocality : ={$.fields.City}.toLowerCase()\n")),(0,r.kt)("p",null,"On obtiendra :\n",(0,r.kt)("inlineCode",{parentName:"p"},'{ id : "2", fields { city : "dar es salaam", contact : "biobuutz@gmail.com" } }')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Pour mettre un champs par d\xe9faut quand la valeur du champs est vide on peut faire :\n",(0,r.kt)("inlineCode",{parentName:"li"},"email : ={$.fields.Contact} ? {$.fields.Contact} : 'Autre'")),(0,r.kt)("li",{parentName:"ul"},"Pour v\xe9rifier si les valeurs d'un champs contiennent un signe '@' et ne pas renvoyer la valeur si il n'y en a pas :\n",(0,r.kt)("inlineCode",{parentName:"li"},"email : ={$.fields.Contact}.includes('@') ? {$.fields.Contact} : '' ")),(0,r.kt)("li",{parentName:"ul"},"Pour donner une valeur constante au champs on peut faire ",(0,r.kt)("inlineCode",{parentName:"li"},"email : marshmallow@gmail.com")," sans mettre le signe $ !")),(0,r.kt)("h3",{id:"fonctionnement-technique"},"Fonctionnement technique"),(0,r.kt)("p",null,"Le composant Transform liste des op\xe9rations \xe0 effectuer pour chaque donn\xe9e fournie en entr\xe9e.\nIl est capable de transformer la structure des donn\xe9es. Il se param\xe8tre gr\xe2ce \xe0 un objet de transformation qui d\xe9crit comment transformer la structure.\nIl est bas\xe9 sur cette librairie : ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/jsonpath-object-transform"},"https://www.npmjs.com/package/jsonpath-object-transform")),(0,r.kt)("h3",{id:"mise-en-garde-\ufe0f"},"Mise en garde \u26a0\ufe0f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Lorsque le nom d'un champ contient des majuscules/des espaces il faut les pr\xe9ciser.\nPar exemple avec un champs ",(0,r.kt)("inlineCode",{parentName:"li"},"ZIP code")," pour la transformation on aura ",(0,r.kt)("inlineCode",{parentName:"li"},"postalCode : $.fields.ZIP code")," ")),(0,r.kt)("h3",{id:"param\xe8tres"},"Param\xe8tres"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"D\xe9tail des \xe9valuations"),": "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Conserver les champs de la source"),": Permet de conserver les anciens champs de la source de donn\xe9es."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Version du Transformer"),": V1 ou V2, les transformers agissent de mani\xe8res diff\xe9rentes, la V2 \xe9tant la plus r\xe9cente.")))}p.isMDXComponent=!0}}]);